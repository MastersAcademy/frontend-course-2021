/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ (() => {

eval("var BODY = document.querySelector('body');\r\nvar PANEL = document.querySelector('[data-panel]');\r\nvar HEADER = document.querySelector('[data-header]');\r\nvar GALLERY_EL = PANEL.querySelector('[data-gallery]');\r\nvar USERS_BAR_EL = PANEL.querySelector('[data-users-bar');\r\nvar LOADER_EL = PANEL.querySelector('[data-loader');\r\nvar currentUser;\r\nvar DATA_SET = [\r\n    { userName: 'User 1', images: ['img/first.jpg', 'img/second.jpg', 'img/third.jpg'] },\r\n    { userName: 'User 2', images: ['img/second.jpg', 'img/third.jpg', 'img/first.jpg'] },\r\n    { userName: 'User 3', images: ['img/third.jpg', 'img/second.jpg', 'img/first.jpg'] }\r\n];\r\nif (!GALLERY_EL) {\r\n    throw new Error('Missing [data-gallery]');\r\n}\r\nvar ImageGallery = /** @class */ (function () {\r\n    function ImageGallery(images) {\r\n        this.images = images;\r\n        var imagePreviewEl = PANEL.querySelector('[data-image-preview]');\r\n        var bigImageEL = PANEL.querySelector('[data-big-image]');\r\n        this.imagePreviewEl = imagePreviewEl;\r\n        this.bigImageEL = bigImageEL;\r\n        this.listenEvents();\r\n    }\r\n    ImageGallery.prototype.addImage = function (image) {\r\n        this.images.push(image);\r\n    };\r\n    ImageGallery.prototype.render = function () {\r\n        GALLERY_EL.innerHTML = '';\r\n        this.images.forEach(function (image) {\r\n            ImageUploader.createImage(image);\r\n        });\r\n    };\r\n    ImageGallery.prototype.listenEvents = function () {\r\n        var _this = this;\r\n        GALLERY_EL.addEventListener('click', function (event) {\r\n            var target = event.target;\r\n            if (target.hasAttribute('data-image')) {\r\n                _this.toggleContent(target);\r\n            }\r\n        });\r\n        this.imagePreviewEl.addEventListener('click', function () {\r\n            _this.imagePreviewEl.classList.add('hidden');\r\n            BODY.classList.toggle('overflow--hidden');\r\n        });\r\n    };\r\n    ImageGallery.prototype.toggleContent = function (target) {\r\n        this.bigImageEL.src = target.getAttribute('src');\r\n        this.imagePreviewEl.classList.remove('hidden');\r\n        BODY.classList.toggle('overflow--hidden');\r\n    };\r\n    return ImageGallery;\r\n}());\r\nvar ImageUploader = /** @class */ (function () {\r\n    function ImageUploader() {\r\n    }\r\n    ImageUploader.createImage = function (source) {\r\n        var newImageBlock = document.createElement('div');\r\n        var newImage = document.createElement('img');\r\n        newImageBlock.classList.add('image-block');\r\n        newImage.src = source;\r\n        newImage.setAttribute('data-image', '');\r\n        newImage.classList.add('image');\r\n        GALLERY_EL.prepend(newImageBlock);\r\n        newImageBlock.append(newImage);\r\n    };\r\n    ImageUploader.listenEvents = function () {\r\n        var _this = this;\r\n        var uploadEl = PANEL.querySelector('[data-upload]');\r\n        uploadEl.addEventListener('change', function (event) {\r\n            LOADER_EL.classList.remove('hidden');\r\n            BODY.classList.remove('overflow--hidden');\r\n            setTimeout(function () {\r\n                if (!!event.target.files[0]) {\r\n                    var imageUrl = URL.createObjectURL(event.target.files[0]);\r\n                    _this.createImage(imageUrl);\r\n                    currentUser.gallery.addImage(imageUrl);\r\n                }\r\n                LOADER_EL.classList.add('hidden');\r\n                BODY.classList.remove('overflow--hidden');\r\n            }, 2000);\r\n        });\r\n    };\r\n    ImageUploader.toggleMenu = function () {\r\n        var burgerSvg = HEADER.querySelector('[data-burger]');\r\n        var burgerEl = HEADER.querySelector('[data-toggle]');\r\n        GALLERY_EL.addEventListener('click', function () {\r\n            if (USERS_BAR_EL.classList.contains('visible')) {\r\n                USERS_BAR_EL.classList.remove('visible');\r\n                burgerEl.setAttribute('href', 'img/burger.svg#burger');\r\n            }\r\n        });\r\n        burgerEl.addEventListener('click', function () {\r\n            USERS_BAR_EL.classList.toggle('visible');\r\n            if (USERS_BAR_EL.classList.contains('visible')) {\r\n                burgerSvg.setAttribute('href', 'img/burger.svg#close');\r\n            }\r\n            else {\r\n                burgerSvg.setAttribute('href', 'img/burger.svg#burger');\r\n            }\r\n        });\r\n    };\r\n    return ImageUploader;\r\n}());\r\nvar User = /** @class */ (function () {\r\n    function User(name, images) {\r\n        this.name = name;\r\n        this.images = images;\r\n        var burgerEl = HEADER.querySelector('[data-burger]');\r\n        this.burgerEl = burgerEl;\r\n        this.name = name;\r\n        this.gallery = new ImageGallery(images);\r\n    }\r\n    User.prototype.isCurrentUser = function () {\r\n        return this === currentUser;\r\n    };\r\n    User.prototype.loadUserImages = function () {\r\n        currentUser = this;\r\n        this.gallery.render();\r\n    };\r\n    User.prototype.render = function () {\r\n        var _this = this;\r\n        var newUser = document.createElement('div');\r\n        newUser.innerHTML = this.name;\r\n        newUser.setAttribute('data-user', '');\r\n        newUser.classList.add('user-new');\r\n        USERS_BAR_EL.appendChild(newUser);\r\n        if (this.isCurrentUser())\r\n            this.gallery.render();\r\n        newUser.addEventListener('click', function () {\r\n            currentUser = _this;\r\n            _this.gallery.render();\r\n        });\r\n    };\r\n    return User;\r\n}());\r\nDATA_SET.forEach(function (_a) {\r\n    var userName = _a.userName, images = _a.images;\r\n    var user = new User(userName, images);\r\n    currentUser = currentUser || user;\r\n    user.render();\r\n});\r\nImageUploader.listenEvents();\r\nImageUploader.toggleMenu();\r\n\n\n//# sourceURL=webpack://7-oop/./src/index.ts?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./src/index.ts"]();
/******/ 	
/******/ })()
;