{"ast":null,"code":"import * as i0 from \"@angular/core\";\n\nfunction AppComponent_app_player_value_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-player-value\", 9);\n    i0.ɵɵlistener(\"changeNamePlayer\", function AppComponent_app_player_value_10_Template_app_player_value_changeNamePlayer_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const player_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.changePlayersName($event, player_r1);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const player_r1 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"id\", player_r1.id);\n    i0.ɵɵproperty(\"player\", player_r1);\n  }\n}\n\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor() {\n      this.state = [[0, 0, 0], [0, 0, 0], [0, 0, 0]];\n      this.iconPlayer = 'dagger';\n      this.nameBtn1 = 'Reset current game';\n      this.nameBtn2 = 'Reset all';\n      this.turnPlayer = 'Player 1';\n      this.playerTurn = false;\n      this.step = 0;\n      this.newWinner = 0;\n      this.players = [{\n        name: 'Player 1',\n        score: 0,\n        icon: 'dagger',\n        id: 1\n      }, {\n        name: 'Player 2',\n        score: 0,\n        icon: 'circle',\n        id: 2\n      }];\n    }\n\n    ngOnInit() {\n      this.dataStorage();\n      this.changePlayerTurn();\n    }\n\n    changePlayersName(value, player) {\n      player.name = value;\n      this.saveGameDate();\n    }\n\n    onClick({\n      row,\n      col\n    }) {\n      if (this.state[row][col] === 0 && !this.newWinner) {\n        this.playerTurn = !this.playerTurn;\n        this.changePlayerTurn();\n        this.state[row][col] = this.playerTurn ? 1 : 2;\n        this.step += 1;\n\n        if (this.step >= 5) {\n          this.winCombinations();\n        }\n\n        if (this.step === 9) {\n          alert('Draw');\n          this.resetCurrentGame();\n        }\n      } else alert('This field is already taken');\n\n      this.saveGameDate();\n    }\n\n    changePlayerTurn() {\n      if (this.playerTurn) {\n        this.iconPlayer = 'circle';\n        this.turnPlayer = this.players[1].name;\n      } else {\n        this.iconPlayer = 'dagger';\n        this.turnPlayer = this.players[0].name;\n      }\n    }\n\n    winCombinations() {\n      const winPositions = [[0, 1, 2], [3, 4, 5], [6, 7, 8], [0, 3, 6], [1, 4, 7], [2, 5, 8], [0, 4, 8], [2, 4, 6]];\n      let index = 0;\n      const newState = this.state.flat();\n\n      for (const position of winPositions) {\n        if (!this.newWinner) {\n          const winPositionsValues = winPositions[index];\n          const result = winPositionsValues.map(index => newState[index]);\n          const checkValue = result[0];\n          const winner = result.every(value => value === checkValue && checkValue);\n          this.newWinner = winner ? checkValue : 0;\n          index++;\n        }\n      }\n\n      if (this.newWinner) {\n        this.newWinner === 1 ? alert('Виграли Хрестики') : alert('Виграли Нолики');\n        this.newWinner === 1 ? this.players[0].score += 1 : this.players[1].score += 1;\n        this.resetCurrentGame();\n      }\n\n      return false;\n    }\n\n    resetCurrentGame() {\n      this.state = [[0, 0, 0], [0, 0, 0], [0, 0, 0]];\n      this.step = 0;\n      this.playerTurn = false;\n      this.changePlayerTurn();\n      this.newWinner = 0;\n      this.saveGameDate();\n    }\n\n    resetAll() {\n      this.players.forEach(player => {\n        player.name = 'Player';\n        player.score = 0;\n      });\n      this.resetCurrentGame();\n      sessionStorage.removeItem('gameStorage');\n    }\n\n    dataStorage() {\n      const gameDate = sessionStorage.getItem('gameStorage');\n\n      if (gameDate) {\n        const data = JSON.parse(gameDate);\n        this.players = data.players;\n        this.step = data.step;\n        this.state = data.state;\n        this.playerTurn = data.playerTurn;\n      }\n    }\n\n    saveGameDate() {\n      const gameDate = {\n        players: this.players,\n        step: this.step,\n        state: this.state,\n        playerTurn: this.playerTurn\n      };\n      sessionStorage.setItem('gameStorage', JSON.stringify(gameDate));\n    }\n\n  }\n\n  AppComponent.ɵfac = function AppComponent_Factory(t) {\n    return new (t || AppComponent)();\n  };\n\n  AppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AppComponent,\n    selectors: [[\"app-root\"]],\n    inputs: {\n      nameBtn1: \"nameBtn1\",\n      nameBtn2: \"nameBtn2\"\n    },\n    decls: 14,\n    vars: 9,\n    consts: [[1, \"game\", \"page__section\"], [1, \"game__turn\"], [1, \"game__turn-logo\"], [1, \"game__turn-name\"], [1, \"game__wrapper\"], [1, \"game__menu\"], [3, \"player\", \"id\", \"changeNamePlayer\", 4, \"ngFor\", \"ngForOf\"], [3, \"name\", \"resetGame\"], [3, \"state\", \"clickChange\"], [3, \"player\", \"id\", \"changeNamePlayer\"]],\n    template: function AppComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-header\");\n        i0.ɵɵelementStart(1, \"section\", 0);\n        i0.ɵɵelementStart(2, \"div\", 1);\n        i0.ɵɵelementStart(3, \"div\");\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(4, \"svg\", 2);\n        i0.ɵɵelement(5, \"use\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(6, \"p\", 3);\n        i0.ɵɵtext(7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"main\", 4);\n        i0.ɵɵelementStart(9, \"aside\", 5);\n        i0.ɵɵtemplate(10, AppComponent_app_player_value_10_Template, 1, 2, \"app-player-value\", 6);\n        i0.ɵɵelementStart(11, \"app-menu-btn\", 7);\n        i0.ɵɵlistener(\"resetGame\", function AppComponent_Template_app_menu_btn_resetGame_11_listener() {\n          return ctx.resetCurrentGame();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"app-menu-btn\", 7);\n        i0.ɵɵlistener(\"resetGame\", function AppComponent_Template_app_menu_btn_resetGame_12_listener() {\n          return ctx.resetAll();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"app-field-game\", 8);\n        i0.ɵɵlistener(\"clickChange\", function AppComponent_Template_app_field_game_clickChange_13_listener($event) {\n          return ctx.onClick($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵclassMapInterpolate1(\"game__turn-value game__turn-value-\", ctx.iconPlayer, \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵattribute(\"href\", \"/assets/sprite.svg#\" + ctx.iconPlayer, null, \"xlink\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"\", ctx.turnPlayer + \" turn\", \" \");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.players);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"name\", ctx.nameBtn1);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"name\", ctx.nameBtn2);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"state\", ctx.state);\n      }\n    },\n    styles: [\".page__section[_ngcontent-%COMP%]{max-width:1440px;margin:0 auto}.game__turn[_ngcontent-%COMP%]{margin:60px auto;display:flex;justify-content:center}.game__turn-value[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px 30px 10px 10px;border-radius:5px}.game__turn-value-dagger[_ngcontent-%COMP%]{background-color:var(--color-player1)}.game__turn-value-circle[_ngcontent-%COMP%]{background-color:var(--color-player2)}.game__turn-logo[_ngcontent-%COMP%]{width:35px;height:35px;margin-right:30px}.game__turn-name[_ngcontent-%COMP%]{font-weight:500;font-size:20px;color:#fff}.game__wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:60px}.game__menu[_ngcontent-%COMP%]{display:flex;max-width:300px;flex-direction:column}@media (max-width: 1024px){.game__wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:30px}}@media (max-width: 576px){.game__turn[_ngcontent-%COMP%]{margin:30px auto}}\"]\n  });\n  return AppComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}